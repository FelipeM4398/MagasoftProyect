sudo: false

language: node_js

node_js:
  - node

script:
  - npm install
  - npm run migration:create
  - npm run migration:run
  - npm run test 

notifications:
  email: false

services: 
  - mysql

addons:
  apt:
    sources:
      - mysql-5.7-trusty
    packages:
      - mysql-server
      - mysql-client

before_install:
  - mysql -e 'CREATE DATABASE MAGAZINE;'
  - mysql -e 'USE MAGAZINE';

deploy:
  provider: pages
  skip_cleanup: true
  github_token: 4d632d33300af4eb57cb7ba3941110b54cf2211a
  local_dir: BACKENDMAGAZINE
  on:
    branch: master

notifications:
  email: false

notifications:
  email: false
